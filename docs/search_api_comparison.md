# Google CSE API vs Anthropic web_search tool 比較

## ■ コスト比較

| 項目 | Google CSE API | Anthropic web_search tool |
|---|---|---|
| 単価 | $5 / 1,000検索 | $10 / 1,000検索 |
| 無料枠 | 100回/日 | なし |
| 1検索あたり | $0.005（約0.75円） | $0.01（約1.5円） |
| **重要な注意** | **2027年1月に廃止予定** | 継続提供 |

### 月間コスト試算（月30本生成）

現在の検索回数（discover_reference_urls）：
- URL空欄時のみ発動、最大3クエリ/生成
- 仮に50%の生成でURL空欄 → 月15回 × 3クエリ = 45検索

改善後の追加検索（フォールバック + 英語補完）：
- フォールバック：失敗URL1件につき1検索 → 月約15検索
- 英語補完：毎回1検索 → 月30検索
- 追加合計：月約45検索

| シナリオ | Google CSE | Anthropic web_search |
|---|---|---|
| 現状のみ（月45検索） | 無料枠内（$0） | $0.45（約67円） |
| 改善後（月90検索） | 無料枠内（$0） | $0.90（約135円） |
| 将来拡大（月300検索） | $1.50（約225円） | $3.00（約450円） |

## ■ 機能比較

| 項目 | Google CSE API | Anthropic web_search tool |
|---|---|---|
| 検索品質 | キーワードマッチ | 文脈理解あり（LLMが判断） |
| 日本語検索 | ○ | ○ |
| 英語検索 | ○ | ○ |
| ドメイン制限 | CSE設定で可能 | allowed_domains パラメータ |
| 結果の形式 | JSON（URL+スニペット） | Citations形式（本文含む場合あり） |
| 検索精度 | 高い（Googleの検索エンジン） | 高い（Brave検索ベース + LLM選定） |
| 実装の簡潔さ | REST API呼出 | Claude APIのtool呼出 |
| 将来性 | **2027年1月廃止予定** | 継続 |

## ■ 結論と推奨

### 推奨：Anthropic web_search tool

理由：

1. **Google CSE APIは2027年1月に廃止が決定している**
   - 既存顧客向けの猶予期間中
   - いずれ移行が必要になるので、今から新機能をCSEで作るのは無駄

2. **コスト差は月68円程度（月30本の場合）**
   - $0.90 vs $0 の差。事業上無視できるレベル

3. **実装がシンプル**
   - HoroloGenは既にAnthropic APIを使っている
   - 同じAPIの中でtoolとして呼ぶだけ。別のAPI鍵・設定が不要
   - allowed_domainsパラメータでTRUST_SOURCESのドメインリストをそのまま渡せる

4. **検索品質が高い**
   - LLMが検索クエリを自分で最適化できる
   - 「この記事はタンクアメリカンの着用レビューだから参考になる」という
     判断をLLM側で行える

### 移行計画

- **Phase 0〜1：既存のCSEはそのまま維持**（discover_reference_urls）
- **Phase 2〜3：新機能（フォールバック + 英語補完）はweb_searchで実装**
- **将来（2026後半）：discover_reference_urlsもweb_searchに移行**

この段階的移行なら、既存の動作を壊すリスクなく進められます。
